"use strict";var p=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var I=(n,t)=>{for(var o in t)p(n,o,{get:t[o],enumerable:!0})},S=(n,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of w(t))!y.call(n,s)&&s!==o&&p(n,s,{get:()=>t[s],enumerable:!(a=g(t,s))||a.enumerable});return n};var b=n=>S(p({},"__esModule",{value:!0}),n);var P={};I(P,{default:()=>f});module.exports=b(P);var e=require("@raycast/api"),c=require("react"),r=require("react/jsx-runtime");function f(){let n=(0,e.getPreferenceValues)(),[t,o]=(0,c.useState)(!1),[a,s]=(0,c.useState)(""),{push:m}=(0,e.useNavigation)(),u=e.environment.appearance||null,d=async()=>{if(!a){(0,e.showToast)({style:e.Toast.Style.Failure,title:"Please enter something to query"});return}o(!0);try{let i=new URLSearchParams({appid:n.appId,i:a,width:"948",units:n.units||"metric",fontsize:"28"});u&&(i.append("background","transparent"),i.append("foreground",u==="light"?"black":"white"));let l=await fetch(`https://api.wolframalpha.com/v1/simple?${i.toString()}`);if(!l.ok){if(l.status===403){(0,e.showToast)({style:e.Toast.Style.Failure,title:"Invalid App ID",message:"Update the App ID in the preferences"});return}throw new Error(l.statusText)}let h=Buffer.from(await l.arrayBuffer());m((0,r.jsx)(e.Detail,{markdown:`![${a}](data:${l.headers.get("content-type")};charset=utf-8;base64,${h.toString("base64")})`,actions:(0,r.jsx)(e.ActionPanel,{children:(0,r.jsx)(e.Action.OpenInBrowser,{url:`https://www.wolframalpha.com/input/?i=${encodeURIComponent(a)}`})})}))}catch(i){(0,e.showToast)({style:e.Toast.Style.Failure,title:"Could not query WolframAlpha",message:i.message})}finally{o(!1)}};return(0,r.jsx)(e.Form,{actions:(0,r.jsxs)(e.ActionPanel,{children:[(0,r.jsx)(e.Action.SubmitForm,{onSubmit:d,title:"Query",icon:e.Icon.MagnifyingGlass}),(0,r.jsx)(e.Action.OpenInBrowser,{url:`https://www.wolframalpha.com/input/?i=${encodeURIComponent(a)}`})]}),isLoading:t,children:(0,r.jsx)(e.Form.TextField,{title:"Wolfram query",placeholder:"Einstein curve",id:"query",onChange:i=>s(i),storeValue:!0})})}
